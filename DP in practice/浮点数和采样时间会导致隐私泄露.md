# 浮点数和采样时间会导致隐私泄露

##真实世界不是连续的

用于实现DP最传统的机制加入的噪声是连续的，但是真实世界是离散的，计算机使用浮点数，使用传统机制会破坏DP性质，泄露隐私。

## 为什么浮点数会破环DP？

### 计算机的浮点数分布是不均匀的

以IEEE754双精度浮点数为例，第一位为符号位，第2-12位表示指数，第13-64位表示尾数。
精度损失表示相邻两个浮点数的间隔，由计算（$\frac{num_{end}-num_{start}}{number\ of\ numbers}$）可以得到，精度损失是在变化的!
![](/picture/2023-05-29-10-26-57.png.png)
图中可以看出对于双精度浮点数，在大约$10^7$左右的地方精度损失可以达到1。
![](/picture/2023-05-29-10-26-57.png)
这说明了，浮点数分布是不均匀的，在0附近稠密，在远离0的地方稀疏。

### 不均匀的浮点数产生连锁效应

假设我们使用Laplacian机制添加噪声,假设有两个相邻的数据库D,D'，$GS_f=1$，$\epsilon = 1/3$。那么我们会输出两个结果，也就是$\widetilde{f}(D)=f(D)+Y$和$\widetilde{f}(D')=f(D')+Y$, $Y$~Lap(3)。
对于双精度浮点数，由于它分布不均匀，若$f(D)=0$和$f(D')=1$是两个不同的值，那么可能的输出情况如下图所示，这种结果我认为是加法导致的。
![](/picture/2023-05-29-10-39-39.png)
很明显，这已经不满足DP的定义了，Ilya Mironov也论证了可以对其进行攻击。

### 解决办法

离散Laplacian和离散Gaussian应运而生。

## 采样时间会泄露隐私

### 离散机制是否真的高枕无忧？

并不是，计算机不能凭空产生一个高斯分布或者拉普拉斯分布，而这些随即数是基于某些好的采样方法采样得到的。以高斯分布举例，方差越大的高斯分布，从里面采样得到随机数所需的时间就越长。
![](/picture/2023-05-29-10-49-04.png)
也就是说，通过运行时间，攻击者推断出噪声尺度是可行的，这将导致隐私泄露。


## Reference

[CCS12]*On Significance of the Least Significant Bits For Differential Privacy* --Ilya Mironov
[SP22]*Are We There Yet? Timing and Floating-Point Attacks on Differential Privacy Systems* -- Jiankai Jin, Eleanor McMurtry, Benjamin I. P. Rubinstein, Olga Ohrimenko